<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Greek Myth Alphabet Game</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      height: 100%;
      font-family: Georgia, serif;
      background: black;
      color: white;
    }

    #game {
      position: relative;
      width: 100vw;
      height: 100vh;
      background: url('background.jpg') center center no-repeat;
      background-size: cover;
    }

    #player {
      position: absolute;
      bottom: 0;
      width: 50px;
      height: 80px;
      background: url('character.png') center/contain no-repeat;
      transition: left 0.1s;
    }

    .cloud {
      position: absolute;
      padding: 6px 14px;
      background: rgba(255, 255, 255, 0.85);
      border-radius: 30px;
      font-weight: bold;
      font-size: 20px;
      color: #222;
      text-align: center;
      white-space: nowrap;
      top: 100px;
      pointer-events: none;
    }

    .arrow {
      position: absolute;
      width: 4px;
      height: 20px;
      background: gold;
    }

    #word-box {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 30px;
      background: rgba(0, 0, 0, 0.6);
      padding: 10px 20px;
      border-radius: 10px;
    }

    .highlight {
      color: gold;
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div id="game">
    <div id="word-box"></div>
    <div id="player"></div>
  </div>

  <script>
    const game = document.getElementById('game');
    const player = document.getElementById('player');
    const wordBox = document.getElementById('word-box');

    const words = ['HERO', 'SKY', 'SUN', 'ZEUS', 'HERA', 'ATHENA', 'ARES'];
    let availableWords = [...words];
    let currentWord = '';
    let typed = '';
    let clouds = [];
    const columns = 10;
    const colWidth = window.innerWidth / columns;
    let playerCol = 5;

    function setPlayerPosition() {
      player.style.left = (playerCol * colWidth + colWidth / 2 - 25) + 'px';
    }

    function updateWordBox() {
      wordBox.innerHTML = `<span class="highlight">${typed}</span>${currentWord.slice(typed.length)}`;
    }

    function pickNextWord() {
      if (availableWords.length === 0) {
        alert('All words completed!');
        return;
      }

      const index = Math.floor(Math.random() * availableWords.length);
      currentWord = availableWords.splice(index, 1)[0];
      typed = '';
      updateWordBox();
      clearClouds();
      generateCloudsForWord(currentWord);
    }

    function clearClouds() {
      clouds.forEach(cloud => cloud.remove());
      clouds = [];
    }

    function generateCloudsForWord(word) {
      const letters = word.split('');
      const extras = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('').filter(c => !letters.includes(c));
      const totalClouds = 10;
      const pool = [...letters];

      while (pool.length < totalClouds) {
        pool.push(extras[Math.floor(Math.random() * extras.length)]);
      }

      shuffle(pool);

      for (let i = 0; i < totalClouds; i++) {
        const cloud = document.createElement('div');
        cloud.className = 'cloud';
        cloud.textContent = pool[i];
        cloud.dataset.letter = pool[i];
        const col = i;
        cloud.dataset.col = col;
        cloud.style.left = (col * colWidth + colWidth / 2 - 20) + 'px';
        cloud.style.top = (Math.random() * 150 + 60) + 'px';
        game.appendChild(cloud);
        clouds.push(cloud);
      }
    }

    function shootArrow() {
      const arrow = document.createElement('div');
      arrow.className = 'arrow';
      arrow.style.left = (playerCol * colWidth + colWidth / 2 - 2) + 'px';
      arrow.style.bottom = '80px';
      game.appendChild(arrow);

      const interval = setInterval(() => {
        const bottom = parseInt(arrow.style.bottom);
        arrow.style.bottom = (bottom + 10) + 'px';

        const arrowRect = arrow.getBoundingClientRect();

        for (let i = 0; i < clouds.length; i++) {
          const cloud = clouds[i];
          const cloudRect = cloud.getBoundingClientRect();

          if (
            arrowRect.left < cloudRect.right &&
            arrowRect.right > cloudRect.left &&
            arrowRect.top < cloudRect.bottom &&
            arrowRect.bottom > cloudRect.top
          ) {
            const letter = cloud.dataset.letter;
            if (currentWord[typed.length] === letter) {
              typed += letter;
              updateWordBox();
              if (typed === currentWord) {
                setTimeout(pickNextWord, 500);
              }
            }
            cloud.remove();
            clouds.splice(i, 1);
            arrow.remove();
            clearInterval(interval);
            return;
          }
        }

        if (bottom > window.innerHeight) {
          arrow.remove();
          clearInterval(interval);
        }
      }, 20);
    }

    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }

    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft') {
        playerCol = Math.max(0, playerCol - 1);
        setPlayerPosition();
      } else if (e.key === 'ArrowRight') {
        playerCol = Math.min(columns - 1, playerCol + 1);
        setPlayerPosition();
      } else if (e.key === ' ') {
        shootArrow();
      }
    });

    function init() {
      setPlayerPosition();
      pickNextWord();
    }

    init();
  </script>
</body>
</html>
